---
/**
 * SocialIcons.astro
 * Racing-themed social links with instrument panel aesthetics
 * Matches the site's glassmorphism and racing green accent system
 *
 * Props:
 *   variant: 'compact' (footer) | 'cards' (contact page)
 */

interface SocialLink {
  name: string;
  href: string;
  icon: string;
  label: string;
  username?: string;
}

interface Props {
  variant?: 'compact' | 'cards';
}

const { variant = 'compact' } = Astro.props;

// Icon library - used by both compact footer icons and contact page cards
const links: SocialLink[] = [
  {
    name: 'twitter',
    href: 'https://twitter.com/StaubRacing106',
    label: 'Follow on X (Twitter)',
    username: '@StaubRacing106',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M4 4l11.733 16h4.267l-11.733-16z"/>
      <path d="M4 20l6.768-6.768m2.46-2.46L20 4"/>
    </svg>`
  },
  {
    name: 'github',
    href: 'https://github.com/staubracing',
    label: 'View GitHub',
    username: 'staubracing',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    </svg>`
  },
  {
    name: 'youtube',
    href: 'https://youtube.com/@staubracing',
    label: 'Subscribe on YouTube',
    username: '@staubracing',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"/>
      <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="currentColor" stroke="none"/>
    </svg>`
  },
  {
    name: 'linkedin',
    href: 'https://www.linkedin.com/in/christopher-staub-engineer/',
    label: 'Connect on LinkedIn',
    username: 'Christopher Staub',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
      <rect x="2" y="9" width="4" height="12"/>
      <circle cx="4" cy="4" r="2" fill="currentColor" stroke="none"/>
    </svg>`
  }
];
---

{variant === 'compact' ? (
  <div class="social-icons" role="navigation" aria-label="Social media links">
    {links.map((link) => (
      <a
        href={link.href}
        class={`social-icon social-icon--${link.name}`}
        target="_blank"
        rel="noopener noreferrer"
        aria-label={link.label}
      >
        <span class="icon-glow" aria-hidden="true"></span>
        <span class="icon-ring" aria-hidden="true"></span>
        <span class="icon-svg" set:html={link.icon}></span>
        <span class="icon-label">{link.name}</span>
      </a>
    ))}
  </div>
) : (
  <div class="contact-grid" role="navigation" aria-label="Social media links">
    {links.map((link) => (
      <a
        href={link.href}
        class={`contact-card contact-card--${link.name}`}
        target="_blank"
        rel="noopener noreferrer"
      >
        <span class="card-glow" aria-hidden="true"></span>
        <span class="card-icon" set:html={link.icon}></span>
        <div class="card-info">
          <span class="card-name">{link.name === 'twitter' ? 'X (Twitter)' : link.name.charAt(0).toUpperCase() + link.name.slice(1)}</span>
          <span class="card-username">{link.username}</span>
        </div>
        <span class="card-arrow" aria-hidden="true">â†’</span>
      </a>
    ))}
  </div>
)}

<style>
  .social-icons {
    display: flex;
    align-items: center;
    gap: 0.625rem;
  }

  .social-icon {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 0.5rem;
    background: var(--surface-soft);
    border: 1px solid var(--surface-border);
    color: var(--text-secondary);
    text-decoration: none;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  .social-icon::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      transparent 0%,
      rgba(26, 135, 84, 0.05) 50%,
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .social-icon:hover::before,
  .social-icon:focus-visible::before {
    opacity: 1;
  }

  /* Icon SVG */
  .icon-svg {
    position: relative;
    z-index: 2;
    width: 1.125rem;
    height: 1.125rem;
  }

  .icon-svg :global(svg) {
    width: 100%;
    height: 100%;
    transition: transform 0.2s ease;
  }

  /* Hidden label for accessibility */
  .icon-label {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Glow effect layer */
  .icon-glow {
    position: absolute;
    inset: -4px;
    border-radius: 0.625rem;
    background: radial-gradient(
      ellipse at center,
      var(--glow-color, var(--accent-racing)) 0%,
      transparent 70%
    );
    opacity: 0;
    filter: blur(6px);
    transition: opacity 0.3s ease;
    z-index: 0;
  }

  /* Animated ring on hover */
  .icon-ring {
    position: absolute;
    inset: -2px;
    border-radius: 0.625rem;
    border: 1px solid var(--glow-color, var(--accent-racing));
    opacity: 0;
    transform: scale(0.9);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1;
  }

  /* Hover states */
  .social-icon:hover,
  .social-icon:focus-visible {
    transform: translateY(-2px);
    border-color: var(--hover-accent, var(--accent-racing));
    color: var(--text-primary);
    background: var(--surface-soft);
  }

  .social-icon:hover .icon-glow,
  .social-icon:focus-visible .icon-glow {
    opacity: 0.4;
  }

  .social-icon:hover .icon-ring,
  .social-icon:focus-visible .icon-ring {
    opacity: 0.6;
    transform: scale(1);
  }

  .social-icon:hover .icon-svg :global(svg),
  .social-icon:focus-visible .icon-svg :global(svg) {
    transform: scale(1.1);
  }

  /* Platform-specific accent colors */
  .social-icon--twitter {
    --glow-color: var(--color-twitter);
    --hover-accent: var(--color-twitter);
  }

  .social-icon--github {
    --glow-color: var(--color-github);
    --hover-accent: var(--color-github);
  }

  .social-icon--youtube {
    --glow-color: var(--color-youtube);
    --hover-accent: var(--color-youtube);
  }

  /* Focus visible for keyboard navigation */
  .social-icon:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--bg-base), 0 0 0 4px var(--accent-racing);
  }

  /* Active press state */
  .social-icon:active {
    transform: translateY(0);
    transition-duration: 0.1s;
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .social-icon,
    .icon-glow,
    .icon-ring,
    .icon-svg :global(svg) {
      transition: none;
    }

    .social-icon:hover,
    .social-icon:focus-visible {
      transform: none;
    }
  }

  /* ============================================
     CARD VARIANT - Contact Page
     ============================================ */

  .contact-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .contact-card {
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 1rem;
    align-items: center;
    padding: 1.25rem 1.5rem;
    border-radius: var(--radius-md);
    border: 1px solid var(--surface-border);
    background: var(--surface-soft);
    color: var(--text-primary);
    text-decoration: none;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  /* Glow layer */
  .card-glow {
    position: absolute;
    inset: -8px;
    background: radial-gradient(
      ellipse at center,
      var(--card-glow-color, var(--accent-racing)) 0%,
      transparent 70%
    );
    opacity: 0;
    filter: blur(12px);
    transition: opacity 0.35s ease;
    z-index: 0;
  }

  /* Icon container */
  .card-icon {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3rem;
    height: 3rem;
    border-radius: 0.75rem;
    background: linear-gradient(
      135deg,
      var(--surface-solid) 0%,
      var(--surface-soft) 100%
    );
    border: 1px solid var(--surface-border);
    color: var(--card-accent, var(--accent-electric));
    transition: all 0.25s ease;
  }

  .card-icon :global(svg) {
    width: 1.35rem;
    height: 1.35rem;
    transition: transform 0.25s ease;
  }

  /* Info section */
  .card-info {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
  }

  .card-name {
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: 0.02em;
  }

  .card-username {
    font-size: 0.85rem;
    color: var(--text-secondary);
  }

  /* Arrow indicator */
  .card-arrow {
    position: relative;
    z-index: 2;
    font-size: 1.25rem;
    color: var(--text-secondary);
    transition: transform 0.25s ease, color 0.25s ease;
  }

  /* Hover states */
  .contact-card:hover,
  .contact-card:focus-visible {
    transform: translateY(-3px);
    border-color: var(--card-accent, var(--accent-electric));
    box-shadow:
      0 8px 24px -8px rgba(0, 0, 0, 0.3),
      0 0 0 1px var(--card-accent, var(--accent-electric));
  }

  .contact-card:hover .card-glow,
  .contact-card:focus-visible .card-glow {
    opacity: 0.25;
  }

  .contact-card:hover .card-icon,
  .contact-card:focus-visible .card-icon {
    background: linear-gradient(
      135deg,
      var(--surface-soft) 0%,
      color-mix(in srgb, var(--card-accent, var(--accent-electric)) 15%, var(--surface-solid)) 100%
    );
    border-color: color-mix(in srgb, var(--card-accent, var(--accent-electric)) 40%, transparent);
  }

  .contact-card:hover .card-icon :global(svg),
  .contact-card:focus-visible .card-icon :global(svg) {
    transform: scale(1.1);
  }

  .contact-card:hover .card-arrow,
  .contact-card:focus-visible .card-arrow {
    transform: translateX(4px);
    color: var(--card-accent, var(--accent-electric));
  }

  /* Platform-specific colors for cards */
  .contact-card--twitter {
    --card-accent: var(--color-twitter);
    --card-glow-color: var(--color-twitter);
  }

  .contact-card--github {
    --card-accent: var(--color-github);
    --card-glow-color: var(--color-github);
  }

  .contact-card--youtube {
    --card-accent: var(--color-youtube);
    --card-glow-color: var(--color-youtube);
  }

  .contact-card--linkedin {
    --card-accent: var(--color-linkedin);
    --card-glow-color: var(--color-linkedin);
  }

  /* Focus visible */
  .contact-card:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px var(--bg-base),
      0 0 0 4px var(--card-accent, var(--accent-racing));
  }

  /* Active state */
  .contact-card:active {
    transform: translateY(-1px);
    transition-duration: 0.1s;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .contact-grid {
      grid-template-columns: 1fr;
    }

    .contact-card {
      padding: 1rem 1.25rem;
    }

    .card-icon {
      width: 2.5rem;
      height: 2.5rem;
    }

    .card-icon :global(svg) {
      width: 1.15rem;
      height: 1.15rem;
    }
  }

  /* Reduced motion for cards */
  @media (prefers-reduced-motion: reduce) {
    .contact-card,
    .card-glow,
    .card-icon,
    .card-icon :global(svg),
    .card-arrow {
      transition: none;
    }

    .contact-card:hover,
    .contact-card:focus-visible {
      transform: none;
    }
  }
</style>
